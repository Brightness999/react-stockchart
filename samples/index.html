<!doctype html>
<html>

<style>
	* {
		margin: 0;
		padding: 0;
	}
	canvas {
		-moz-user-select: none;
		-webkit-user-select: none;
		-ms-user-select: none;
		user-select: none;
		width: 100%;
	}

	.canvas_container {
		border: 0;
		width: 100%;
		height: 100%;
		background-color: #c45151;
	}
	#myChart {
		display: block;
	}
</style>

<head>
	<title>ClChart Demo</title>
	<script src="../dist/ClChart.js"></script>
	<script src="./index_data.js"></script>
	<style>
		canvas {
			-moz-user-select: none;
			-webkit-user-select: none;
			-ms-user-select: none;
			user-select: none;
		}
	</style>
</head>

<body>
	<div class="container">
		<h1>clchart</h1>
	</div>
	<div class='canvas_container'>
		<canvas id="myChart" height="800"></canvas>
	</div>
	<script>
		// 开始画图
		setscale = function (canvas, scale) {
			canvas.width = canvas.clientWidth * scale;
			canvas.height = canvas.clientHeight * scale;
			return {
				width: canvas.width,
				height: canvas.height
			};
		}
		window.onload = function () {
			var canvas = document.getElementById('myChart');
			var wh = setscale(canvas, window.devicePixelRatio);
			// console.log(wh, canvas, canvas.style);

			var ctx = canvas.getContext('2d');
			// ctx.scale(ratio, ratio);
			var syscfg = {
				canvas,
				scale: window.devicePixelRatio,
				context: ctx
			};
			var Chart = ClChart.createSingleChart(syscfg);
			Chart.initData();
			Chart.setData('INFO', ClChart.CFG.FIELD_INFO, ['', 1, 2, 100, 3000, 3300, 2700]);
			Chart.setData('DAY', ClChart.CFG.FIELD_DAY, TESTDATA.DAY);
			var mainHeight = wh.height * 2 / 3;
			var usercfg = {
				layout: ClChart.CFG.CFG_LAYOUT,
				buttons: ClChart.CFG.CFG_BUTTONS,
				config: ClChart.CFG.CFG_CHART_KBAR,
				rectMain: {
					left: 0,
					top: 0,
					width: wh.width,
					height: mainHeight,
				}
			};
			 var KBarChart = Chart.createChart('KBAR', 'CHART.LINE', usercfg, result => 
			 	{ 
				//  console.log(result); 
				});
			Chart.bindData(KBarChart, 'DAY');

			usercfg = {
				layout: ClChart.CFG.CFG_LAYOUT,
				config: ClChart.CFG.CFG_CHART_VBAR,
				rectMain: {
					left: 0,
					top: mainHeight,
					width: wh.width,
					height: wh.height - mainHeight,
				}
			};
			var KVBarChart = Chart.createChart('VBAR', 'CHART.LINE', usercfg, result => 
			 	{ 
				//  console.log(result); 
				});
			Chart.bindData(KVBarChart, 'DAY');

			Chart.onPaint();
		};
	</script>
</body>

</html>