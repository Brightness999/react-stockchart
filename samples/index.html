<!doctype html>
<html>
<head>
	<title>ClChart Demo</title>
	<meta data-n-head="true" name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
	<script src="../dist/ClChart.js"></script>
	<script src="./index_data.js"></script>
	<link rel="stylesheet" type="text/css" href="./style.css" />
</head>

<body>
	<div class="container">
		<div class="header-container">
			<div class="btn-group">
				<button onclick="handleMin()" class="action-button shadow animate">分时</button>
				<button onclick="handleFiveDay()" class="action-button shadow animate">五日</button>
				<button onclick="handleKline()" class="action-button shadow animate">日K</button>
			</div>
		</div>
		<div class="chart-container">
			<canvas id="myChart" width="400" height="600"></canvas>
		</div>
	</div>
	<script>
		// 开始画图
		// 画分钟线
		function handleMin() {
			console.log('Min Line');
			var canvas = document.getElementById('myChart');
			var ctx = canvas.getContext('2d');
			var syscfg = {
				canvas,
				scale: window.devicePixelRatio,
				context: ctx
			};
			var Chart = ClChart.createSingleChart(syscfg);
			Chart.initData();
			Chart.setData('INFO', ClChart.DATACFG.FIELD_INFO, ['', 1, 2, 100, 3000, 3300, 2700]);
			Chart.setData('TICK', ClChart.DATACFG.FIELD_TICK, TESTDATA.TICK);
			Chart.setData('MIN', ClChart.DATACFG.FIELD_MIN, TESTDATA.MIN);
			Chart.setData('NOW', ClChart.DATACFG.FIELD_NOW, TESTDATA.NOW);
			var mainHeight = canvas.height * 2 / 3;
			var mainWidth = canvas.width * 3 / 4;
			var usercfg = {
				layout: ClChart.CFG.CFG_LAYOUT,
				config: ClChart.CFG.CFG_CHART_NOW,
				rectMain: {
					left: 0,
					top: 0,
					width: mainWidth,
					height: mainHeight,
				}
			};
			 var Chart1 = Chart.createChart('MIN', 'CHART.LINE', usercfg, result => 
			 	{ 
				//  console.log(result); 
				});
			Chart.bindData(Chart1, 'MIN');

			usercfg = {
				layout: ClChart.CFG.CFG_LAYOUT,
				config: ClChart.CFG.CFG_CHART_NOWVOL,
				rectMain: {
					left: 0,
					top: mainHeight,
					width: mainWidth,
					height: canvas.height - mainHeight,
				}
			};
			var Chart2 = Chart.createChart('MINNOW', 'CHART.LINE', usercfg, result => 
			 	{ 
				//  console.log(result); 
				});
			Chart.bindData(Chart2, 'MIN');

			usercfg = {
				layout: ClChart.CFG.CFG_LAYOUT,
				config: ClChart.CFG.CFG_ORDER,
				rectMain: {
					left: mainWidth,
					top: 0,
					width: canvas.width - mainWidth,
					height: canvas.height,
				}
			};
			var Chart3 = Chart.createChart('ORDER', 'CHART.ORDER', usercfg, result => 
			 	{ 
				//  console.log(result); 
				});
			// Chart.bindData(Chart3, 'TICK');

			Chart.onPaint();
		}
		// 画五日线
		function handleFiveDay() {
			console.log('Five Day Line');
			var canvas = document.getElementById('myChart');
			var ctx = canvas.getContext('2d');
			var syscfg = {
				canvas,
				scale: window.devicePixelRatio,
				context: ctx
			};
			var Chart = ClChart.createSingleChart(syscfg);
			Chart.initData();
			Chart.setData('INFO', ClChart.DATACFG.FIELD_INFO, ['', 1, 2, 100, 3000, 3300, 2700]);
			Chart.setData('DAY5', ClChart.DATACFG.FIELD_DAY5, TESTDATA.DAY5);
			Chart.setData('MIN', ClChart.DATACFG.FIELD_MIN, TESTDATA.MIN);
			var mainHeight = canvas.height * 2 / 3;
			var usercfg = {
				layout: ClChart.CFG.CFG_LAYOUT,
				config: ClChart.CFG.CFG_CHART_DAY5,
				rectMain: {
					left: 0,
					top: 0,
					width: canvas.width,
					height: mainHeight,
				}
			};
			 var KBarChart = Chart.createChart('DAY5', 'CHART.LINE', usercfg, result => 
			 	{ 
				//  console.log(result); 
				});
			Chart.bindData(KBarChart, 'DAY5');

			usercfg = {
				layout: ClChart.CFG.CFG_LAYOUT,
				config: ClChart.CFG.CFG_CHART_DAY5VOL,
				rectMain: {
					left: 0,
					top: mainHeight,
					width: canvas.width,
					height: canvas.height - mainHeight,
				}
			};
			var KVBarChart = Chart.createChart('VLINE5', 'CHART.LINE', usercfg, result => 
			 	{ 
				//  console.log(result); 
				});
			Chart.bindData(KVBarChart, 'DAY5');

			Chart.onPaint();
		}
		// 画日线
		function handleKline() {
			var canvas = document.getElementById('myChart');
			var ctx = canvas.getContext('2d');
			var syscfg = {
				canvas,
				scale: window.devicePixelRatio,
				context: ctx
			};
			var Chart = ClChart.createSingleChart(syscfg);
			Chart.initData();
			Chart.setData('INFO', ClChart.DATACFG.FIELD_INFO, ['', 1, 2, 100, 3000, 3300, 2700]);
			Chart.setData('DAY', ClChart.DATACFG.FIELD_DAY, TESTDATA.DAY);
			var mainHeight = canvas.height * 2 / 3;
			var usercfg = {
				layout: ClChart.CFG.CFG_LAYOUT,
				buttons: ClChart.CFG.CFG_BUTTONS,
				config: ClChart.CFG.CFG_CHART_KBAR,
				rectMain: {
					left: 0,
					top: 0,
					width: canvas.width,
					height: mainHeight,
				}
			};
			 var KBarChart = Chart.createChart('KBAR', 'CHART.LINE', usercfg, result => 
			 	{ 
				//  console.log(result); 
				});
			Chart.bindData(KBarChart, 'DAY');

			usercfg = {
				layout: ClChart.CFG.CFG_LAYOUT,
				config: ClChart.CFG.CFG_CHART_VBAR,
				rectMain: {
					left: 0,
					top: mainHeight,
					width: canvas.width,
					height: canvas.height - mainHeight,
				}
			};
			var KVBarChart = Chart.createChart('VBAR', 'CHART.LINE', usercfg, result => 
			 	{ 
				//  console.log(result); 
				});
			Chart.bindData(KVBarChart, 'DAY');

			Chart.onPaint();
		}

		window.onload = function () {
			// handleKline();
		};
	</script>
</body>

</html>